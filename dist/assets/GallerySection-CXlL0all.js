import{a as N,r as l,j as n,T as y,b as T,u as w,L}from"./index-Ct8iYdvQ.js";import{u as I,B as C,d as A}from"./description-C64dslDR.js";import{u as S}from"./useGroupImage-ph1xErP6.js";import{B}from"./Breadcrumbs-B4JoqmVa.js";var P=N();const R="_root_1itdt_1",D="_title_1itdt_11",O="_section_1itdt_15",W="_header_1itdt_37",F="_content_1itdt_48",G="_skeletonImage_1itdt_97",f={root:R,title:D,section:O,header:W,content:F,skeletonImage:G},z=({children:r})=>{const o=document.getElementById("modal-root");return o?P.createPortal(r,o):null},$="_backdrop_10clo_1",U="_content_10clo_16",q="_imageWrapper_10clo_23",V="_mobileImage_10clo_36",Z="_close_10clo_65",X="_caption_10clo_85",Y="_prev_10clo_97",K="_next_10clo_97",m={backdrop:$,content:U,imageWrapper:q,mobileImage:V,close:Z,caption:X,prev:Y,next:K};/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var x=function(r,o){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])},x(r,o)};function H(r,o){x(r,o);function e(){this.constructor=r}r.prototype=o===null?Object.create(o):(e.prototype=o.prototype,new e)}function J(r,o){o===void 0&&(o={});var e=o.insertAt;if(!(typeof document>"u")){var t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e==="top"&&t.firstChild?t.insertBefore(s,t.firstChild):t.appendChild(s),s.styleSheet?s.styleSheet.cssText=r:s.appendChild(document.createTextNode(r))}}var Q=`.styles_container__2pRR5 {
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  padding: 8px;
}

.styles_container__2pRR5:hover .styles_magnifying-glass__12Z9V {
  opacity: 1;
}

.styles_magnifying-glass__12Z9V {
  z-index: 10;
  position: absolute;
  background-repeat: no-repeat;
  background-color: white;
  border-style: solid;
  border-radius: 50%;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.5s ease-in-out;
}`,j={container:"styles_container__2pRR5","magnifying-glass":"styles_magnifying-glass__12Z9V"};J(Q);var _;(function(r){r.NONE="none",r.NORMAL="normal"})(_||(_={}));var ee=(function(r){H(o,r);function o(e){var t=r.call(this,e)||this;return t.touchMoveListenerAdded=!1,t.handleMouseMove=function(s){s.preventDefault();var c=s.type==="touchmove"||s.type==="touchstart";t.handleImagePosition(s,c)},t.handleTouchStart=t.handleTouchStart.bind(t),t.handleTouchEnd=t.handleTouchEnd.bind(t),t}return o.prototype.componentDidMount=function(){this.imgEl.addEventListener("mousemove",this.handleMouseMove),this.imgEl.addEventListener("touchstart",this.handleTouchStart),this.imgEl.addEventListener("touchend",this.handleTouchEnd),this.setGlassStyles()},o.prototype.componentWillUnmount=function(){this.imgEl.removeEventListener("mousemove",this.handleMouseMove),this.imgEl.removeEventListener("touchmove",this.handleMouseMove),this.imgEl.removeEventListener("touchstart",this.handleTouchStart),this.imgEl.removeEventListener("touchend",this.handleTouchEnd)},o.prototype.render=function(){var e=this;return l.createElement("div",{className:j.container},l.createElement("img",{src:this.props.imageUrl,alt:this.props.imgAlt,ref:function(t){e.imgEl=t}}),l.createElement("div",{className:j["magnifying-glass"],ref:function(t){e.glass=t}}))},o.prototype.removeGlass=function(){var e=this;window.requestAnimationFrame(function(){e.imgEl.style.cursor=_.NORMAL})},o.prototype.handleImagePosition=function(e,t){var s=this;t===void 0&&(t=!1);var c=t?e.targetTouches[0].target:e.target;if(c!==this.imgEl){this.removeGlass();return}window.requestAnimationFrame(function(){var a={x:t?e.targetTouches[0].pageX:e.pageX,y:t?e.targetTouches[0].pageY:e.pageY},i=s.imgEl.getBoundingClientRect(),h=s.glass.offsetWidth/2,p=s.props.zoomFactor*(a.x-i.left)-h,u=s.props.zoomFactor*(a.y-i.top)-h;s.imgEl.style.cursor=_.NONE,s.glass.style.left=a.x-h+"px",s.glass.style.top=a.y-h+"px",s.glass.style.backgroundPosition=-p+"px "+-u+"px",s.glass.style.backgroundSize=s.props.zoomFactor*i.width+"px "+s.props.zoomFactor*i.height+"px"})},o.prototype.handleTouchEnd=function(e){e.preventDefault(),this.imgEl.removeEventListener("touchmove",this.handleMouseMove),this.touchMoveListenerAdded=!1,this.removeGlass(),this.glass.style.opacity="0"},o.prototype.handleTouchStart=function(e){if(e.preventDefault(),this.touchMoveListenerAdded&&(this.imgEl.removeEventListener("touchmove",this.handleMouseMove),this.touchMoveListenerAdded=!1),e.targetTouches[0].target!==this.imgEl){this.removeGlass(),this.glass.style.opacity="0";return}this.glass.style.opacity="1",this.imgEl.addEventListener("touchmove",this.handleMouseMove),this.touchMoveListenerAdded=!0},o.prototype.setGlassStyles=function(){this.glass.style.backgroundImage='url("'+this.props.largeImageUrl+'")',this.glass.style.height=(this.props.glassDimension||150)+"px",this.glass.style.width=(this.props.glassDimension||150)+"px",this.glass.style.borderColor=this.props.glassBorderColor||"#be9a35",this.glass.style.borderWidth=(this.props.glassBorderWidth||8)+"px"},o})(l.PureComponent);const te=({open:r,onClose:o,images:e=[],index:t=0,onChangeIndex:s})=>{const c=Math.max(0,Math.min(t,e.length-1)),a=e[c],i=l.useCallback(u=>{if(!s)return;const g=(u%e.length+e.length)%e.length;s(g)},[e.length,s]),h=l.useCallback(()=>{e.length!==0&&i(c+1)},[e.length,c,i]),p=l.useCallback(()=>{e.length!==0&&i(c-1)},[e.length,c,i]);return l.useEffect(()=>{if(!r)return;const u=v=>{if(v.key==="Escape")return o?.();if(v.key==="ArrowRight")return h();if(v.key==="ArrowLeft")return p()};document.addEventListener("keydown",u);const g=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",u),document.body.style.overflow=g}},[r,o,h,p]),!r||!a?null:n.jsx(z,{children:n.jsx("div",{className:m.backdrop,onMouseDown:o,role:"dialog","aria-modal":"true",children:n.jsxs("div",{className:m.content,onMouseDown:u=>u.stopPropagation(),children:[n.jsxs("div",{className:m.imageWrapper,children:[n.jsx(ee,{imageUrl:a.link,largeImageUrl:a.link,zoomFactor:2,glassDimension:250,glassBorderColor:"#000000cc",glassBorderWidth:2},a.link),n.jsx("img",{className:m.mobileImage,src:a.link,alt:"image"})]}),n.jsx("button",{className:m.close,"aria-label":"Close",onClick:o,children:"×"}),n.jsx("button",{className:m.prev,"aria-label":"Previous",onClick:p,type:"button",children:"‹"}),n.jsx("button",{className:m.next,"aria-label":"Next",onClick:h,type:"button",children:"›"}),a.title&&n.jsx("div",{className:m.caption,children:a.title&&n.jsx(y,{className:m.title,name:"caption6",text:a.title})})]})})})},ae=()=>{const{alias:r}=T(),o=w(),{data:e,isLoading:t,error:s}=I(),{grouped:c,aliasNames:a}=S(e??[]),i=l.useMemo(()=>c.find(d=>d.alias===r),[c,r]),[h,p]=l.useState(!1),[u,g]=l.useState(0),[v,E]=l.useState(!0);l.useEffect(()=>{window.scrollTo(0,0),E(!0);const d=setTimeout(()=>E(!1),500);return()=>clearTimeout(d)},[r]);const k=d=>{g(d),p(!0)},M=()=>p(!1);return t?n.jsx(L,{}):s?n.jsx(Error,{error:s.message}):i?n.jsxs("main",{className:f.root,children:[n.jsx(B,{items:[{label:"Главная",href:"/"},{label:"Галерея",href:"/gallery"},{label:`${a[r]}`,href:`/gallery/${r}`}],separator:"|"}),n.jsx(y,{name:"title2_secondary",text:"Галерея",className:f.title}),n.jsx("div",{className:f.section,children:n.jsx(y,{name:"caption3_secondary_italic",text:A[r]})}),n.jsx("div",{className:f.header,children:n.jsx(y,{name:"title2_secondary",text:`"${a[r]}"`})}),n.jsx("div",{className:f.content,children:v?[1,2,3,4,5,6].map(d=>n.jsx("div",{className:f.skeletonImage},d)):i.items.map((d,b)=>n.jsx("div",{onClick:()=>{k(b),window.scrollTo(0,0)},children:n.jsx("img",{src:d.link,alt:d.name})},b))}),n.jsx(te,{open:h,onClose:M,images:i.items.filter(Boolean),index:u,onChangeIndex:d=>g(d)})]}):n.jsxs("div",{children:[n.jsx(y,{name:"title3",text:"Раздел не найден"}),n.jsx(C,{variant:"ghost",onClick:()=>o("/gallery"),children:n.jsx(y,{name:"caption2",text:"Вернуться"})})]})};export{ae as default};
